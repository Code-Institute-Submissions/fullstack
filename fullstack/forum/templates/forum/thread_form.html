{% extends "forum/forum.html" %}
{% load bootstrap_tags %}
{% load staticfiles %}
{#{% block head_css %}#}
{#    <link rel="stylesheet" href="{% static "css/fontawesome/css/fontawesome-all.css" %}">#}
{#{% endblock %}#}
{% block head_js %}
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="{% static 'js/tinymce/tinymce.min.js' %}"></script>
    <script>
        tinyMCE.init({
            mode: "textareas",
            theme: 'modern',
            plugins: 'paste',
            branding: false
        })
    </script>
{% endblock %}
{% block forum %}
    <section>
        <div class="row no-gutters justify-content-center">
            <div class="col-md-9">
                <form method="POST" action="{% url 'new_thread' subject.id %}">
                    {% csrf_token %}
                    <div class="form-group">
                        {{ thread_form | as_bootstrap }}
                        <div id="poll_form" class="form-group">
                            {{ poll_form | as_bootstrap }}
                            {{ poll_subject_formset.management_form }}
                            {% for poll_subject_form in poll_subject_formset %}
                                {{ poll_subject_form | as_bootstrap }}
                            {% endfor %}
                        </div>
                        <hr />
                        {{ post_form | as_bootstrap }}
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Post New Thread</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <script>
        function showOrHidePollForm() {
            if ($('#id_is_a_poll').is(':checked')) {
                $('#poll_form').show();
                $('#id_question').prop("disabled", false);
            } else {
                $('#poll_form').hide();
                $('#id_question').prop("disabled", true);
            }
        }
        $(document).ready(showOrHidePollForm);
        $('#id_is_a_poll').change(showOrHidePollForm);
    </script>
{% endblock %}
